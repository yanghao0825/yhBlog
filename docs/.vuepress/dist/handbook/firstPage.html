<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一章 | YH的个人博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="杨豪的个人博客">
    
    <link rel="preload" href="/yhBlog/assets/css/0.styles.fe65b13b.css" as="style"><link rel="preload" href="/yhBlog/assets/js/app.916f3763.js" as="script"><link rel="preload" href="/yhBlog/assets/js/7.0f46c849.js" as="script"><link rel="preload" href="/yhBlog/assets/js/2.443f2001.js" as="script"><link rel="preload" href="/yhBlog/assets/js/1.01d42e65.js" as="script"><link rel="preload" href="/yhBlog/assets/js/39.4cbde676.js" as="script"><link rel="prefetch" href="/yhBlog/assets/js/10.c9e4b37e.js"><link rel="prefetch" href="/yhBlog/assets/js/11.b222932f.js"><link rel="prefetch" href="/yhBlog/assets/js/14.049b800d.js"><link rel="prefetch" href="/yhBlog/assets/js/15.d57baa32.js"><link rel="prefetch" href="/yhBlog/assets/js/16.15f24638.js"><link rel="prefetch" href="/yhBlog/assets/js/17.f431741b.js"><link rel="prefetch" href="/yhBlog/assets/js/18.3d170781.js"><link rel="prefetch" href="/yhBlog/assets/js/19.841fdca6.js"><link rel="prefetch" href="/yhBlog/assets/js/20.f2f82092.js"><link rel="prefetch" href="/yhBlog/assets/js/21.aac1fd84.js"><link rel="prefetch" href="/yhBlog/assets/js/22.3d863433.js"><link rel="prefetch" href="/yhBlog/assets/js/23.65d8a977.js"><link rel="prefetch" href="/yhBlog/assets/js/24.ff34dd66.js"><link rel="prefetch" href="/yhBlog/assets/js/25.b271c483.js"><link rel="prefetch" href="/yhBlog/assets/js/26.af087ac1.js"><link rel="prefetch" href="/yhBlog/assets/js/27.a9bcc2df.js"><link rel="prefetch" href="/yhBlog/assets/js/28.2dd40e06.js"><link rel="prefetch" href="/yhBlog/assets/js/29.f5d1d363.js"><link rel="prefetch" href="/yhBlog/assets/js/3.281a85d7.js"><link rel="prefetch" href="/yhBlog/assets/js/30.4eda9a85.js"><link rel="prefetch" href="/yhBlog/assets/js/31.e440cff0.js"><link rel="prefetch" href="/yhBlog/assets/js/32.0b9da511.js"><link rel="prefetch" href="/yhBlog/assets/js/33.f9c82857.js"><link rel="prefetch" href="/yhBlog/assets/js/34.b454c0c6.js"><link rel="prefetch" href="/yhBlog/assets/js/35.85284c1a.js"><link rel="prefetch" href="/yhBlog/assets/js/36.d254d410.js"><link rel="prefetch" href="/yhBlog/assets/js/37.d02a5b90.js"><link rel="prefetch" href="/yhBlog/assets/js/38.bd4d392a.js"><link rel="prefetch" href="/yhBlog/assets/js/4.7cc46b8a.js"><link rel="prefetch" href="/yhBlog/assets/js/40.f679ad20.js"><link rel="prefetch" href="/yhBlog/assets/js/5.f23a30ea.js"><link rel="prefetch" href="/yhBlog/assets/js/6.d92bbf7e.js"><link rel="prefetch" href="/yhBlog/assets/js/8.3167f564.js"><link rel="prefetch" href="/yhBlog/assets/js/9.b9e9b979.js"><link rel="prefetch" href="/yhBlog/assets/js/vendors~docsearch.814a0df0.js">
    <link rel="stylesheet" href="/yhBlog/assets/css/0.styles.fe65b13b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>YH的个人博客</h3> <p class="description" data-v-59e6cb88>杨豪的个人博客</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yhBlog/" class="home-link router-link-active"><!----> <span class="site-name">YH的个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yhBlog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      YH的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/yanghao-blogs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客园
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>3</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/yhBlog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      YH的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/yanghao-blogs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客园
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/yhBlog/" class="sidebar-heading clickable router-link-active"><span>首页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/yhBlog/" aria-current="page" class="sidebar-link">首页菜单</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/yhBlog/handbook/firstPage" class="sidebar-heading clickable open active"><span>其他页面</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/yhBlog/handbook/firstPage.html" aria-current="page" class="active sidebar-link">第一章</a></li><li><a href="/yhBlog/handbook/secondPage.html" class="sidebar-link">第二章</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>第一章</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">第一章</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>YH</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/9/19</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="示例文章-google-搜索的即时自动补全功能究竟是如何-工作-的"><a href="#示例文章-google-搜索的即时自动补全功能究竟是如何-工作-的" class="header-anchor">#</a> 示例文章：Google 搜索的即时自动补全功能究竟是如何“工作”的？</h1> <blockquote><p>Google 搜索<strong>自动补全功能</strong>的强大，相信不少朋友都能感受到，它帮助我们更快地“补全”我们所要输入的搜索关键字。那么，它怎么知道我们要输入什么内容？它又是如何工作的？在这篇文章里，我们一起来看看。</p></blockquote> <h2 id="使用自动补全"><a href="#使用自动补全" class="header-anchor">#</a> 使用自动补全</h2> <p>Google 搜索的自动补全功能可以在 Google 搜索应用的大多数位置使用，包括 <a href="https://www.google.com/" target="_blank" rel="noopener noreferrer">Google<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 主页、适用于 IOS 和 Android 的 Google 应用，我们只需要在 Google 搜索框上开始键入关键字，就可以看到联想词了。</p> <p><img src="https://fastly.jsdelivr.net/gh/filess/img18@main/2023/09/19/1695093184267-bd968521-5f3d-46f3-814b-9d1935335c56.jpeg" alt=""></p> <p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303019705-c161ce00-d245-446a-b81c-42ec91474a40.gif" alt=""></p> <p>在上图示例中，我们可以看到，输入关键字 <code>juej</code>，Google 搜索会联想到“掘金”、“掘金小册”、“绝句”等等，好处就是，我们无须输入完整的关键字即可轻松完成针对这些 topics 的搜索。</p> <p>谷歌搜索的自动补全功能对于使用移动设备的用户来说特别有用，用户可以轻松在难以键入的小屏幕上完成搜索。当然，对于移动设备用户和台式机用户而言，这都节省了大量的时间。根据 Google 官方报告，自动补全功能可以减少大约 25% 的打字，累积起来，预计每天可以节省 200 多年的打字时间。是的，每天！</p> <blockquote><p>注意，本文所提到的“<strong>联想词</strong>”与“<strong>预测</strong>”，是同一个意思。</p></blockquote> <h2 id="基于-预测-而非-建议"><a href="#基于-预测-而非-建议" class="header-anchor">#</a> 基于“预测”而非“建议”</h2> <p>Google 官方将自动补全功能称之为“预测”，而不是“建议”，为什么呢？其实是有充分理由的。自动补全功能是为了<strong>帮助用户完成他们打算进行的搜索</strong>，而不是建议用户要执行什么搜索。</p> <p>那么，Google 是如何确定这些“预测”的？其实，Google 会根据趋势搜索 <a href="https://trends.google.com/trends/?geo=US" target="_blank" rel="noopener noreferrer">trends<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 给到我们这些“预测”。简单来说，哪个热门、哪个搜索频率高，就更可能推给我们。当然，这也与我们当前所处的位置以及我们的搜索历史相关。</p> <p>另外，这些“预测”也会随着我们键入的关键字的变更而更改。例如，当我们把键入的关键字从 <code>juej</code> 更改为 <code>juex</code> 时，与“掘金”相关的预测会“消失”，同时，与“觉醒”、“决心”相关联的词会出现。</p> <p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303068169-386a99cb-143b-4ded-a859-1b7a4c4b5bd3.gif" alt=""></p> <h2 id="为什么看不到某些联想词"><a href="#为什么看不到某些联想词" class="header-anchor">#</a> 为什么看不到某些联想词？</h2> <p>如果我们在输入某个关键字时看不到联想词，那么表明 Google 的算法可能检测到：</p> <ul><li>这个关键字不是热门字词；</li> <li>搜索的字词太新了，我们可能需要等待几天或几周才能看到联想词；</li> <li>这是一个侮辱性或敏感字词，这个搜索字词违反了 Google 的相关政策。更加详细的情况，可以了解 <a href="https://support.google.com/websearch/answer/7368877" target="_blank" rel="noopener noreferrer">Google 搜索自动补全政策<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul> <h2 id="为什么会看到某些不当的联想词"><a href="#为什么会看到某些不当的联想词" class="header-anchor">#</a> 为什么会看到某些不当的联想词？</h2> <p>Google 拥有专门设计的系统，可以自动捕获不适当的预测结果而不显示出来。然而，Google 每天需要处理数十亿次搜索，这意味着 Google 每天会显示数十亿甚至上百亿条预测。再好的系统，也可能存在缺陷，不正确的预测也可能随时会出现。</p> <p>我们作为 Google 搜索的用户，如果认定某条预测违反了相关的搜索自动补全政策，可以进行举报反馈，点击右下角“<strong>举报不当的联想查询</strong>”并勾选相关选项即可。</p> <p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303098026-cac215dc-42c9-462a-a359-dcfb12ed3234.gif" alt=""></p> <h2 id="如何实现自动补全算法"><a href="#如何实现自动补全算法" class="header-anchor">#</a> 如何实现自动补全算法？</h2> <p>目前，Google 官方似乎并没有公开搜索自动补全的算法实现，但是业界在这方面已经有了不少研究。</p> <p>一个好的自动补全器必须是快速的，并且在用户键入下一个字符后立即更新联想词列表。<strong>自动补全器的核心是一个函数，它接受输入的前缀，并搜索以给定前缀开头的词汇或语句列表</strong>。通常来说，只需要返回少量的数目即可。</p> <p>接下来，我们先从一个简单且低效的实现开始，并在此基础上逐步构建更高效的方法。</p> <h3 id="词汇表实现"><a href="#词汇表实现" class="header-anchor">#</a> 词汇表实现</h3> <p>一个<strong>简单粗暴的实现方式</strong>是：顺序查找词汇表，依次检查每个词汇，看它是否以给定的前缀开头。</p> <p>但是，此方法需要将前缀与每个词汇进行匹配检查，若词汇量较少，这种方式可能勉强行得通。但是，如果词汇量规模较大，效率就太低了。</p> <p>一个<strong>更好的实现方式是</strong>：让词汇按字典顺序排序。借助二分搜索算法，可以快速搜索有序词汇表中的前缀。由于二分搜索的每一步都会将搜索的范围减半，因此，总的搜索时间与词汇表中单词数量的对数成正比，即时间复杂度是 <code>O(log N)</code>。二分搜索的性能很好，但有没有更好的实现呢？当然有，往下看。</p> <h3 id="前缀树实现"><a href="#前缀树实现" class="header-anchor">#</a> 前缀树实现</h3> <p>通常来说，许多词汇都以相同的前缀开头，比如 <code>need</code>、<code>nested</code> 都以 <code>ne</code> 开头，<code>seed</code>、<code>speed</code> 都以 <code>s</code> 开头。要是为每个单词分别存储公共前缀似乎很浪费。</p> <p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303128008-93cf798d-2662-4eec-8f80-2e07436aebfe.png" alt=""></p> <p>前缀树是一种利用公共前缀来加速补全速度的数据结构。前缀树在节点树中排列一组单词，单词沿着从根节点到叶子节点的路径存储，树的层次对应于前缀的字母位置。</p> <p>前缀的补全是顺着前缀定义的路径来查找的。例如，在上图的前缀树中，前缀 <code>ne</code> 对应于从子节点取左边缘 <code>N</code> 和唯一边缘 <code>E</code> 的路径。然后可以通过继续遍历从 <code>E</code> 节点可以达到的所有叶节点来生成补全列表。在图中，<code>ne</code> 的补全可以是两个分支：<code>-ed</code> 和 <code>-sted</code>。如果在数中找不到由前缀定义的路径，则说明词汇表中不包含以该前缀开头的单词。</p> <h3 id="有限状态自动机-dfa-实现"><a href="#有限状态自动机-dfa-实现" class="header-anchor">#</a> 有限状态自动机(DFA)实现</h3> <p>前缀树可以有效处理公共前缀，但是，对于其他共享词部分，仍会分别存储在每个分支中。比如，后缀 <code>ed</code>、<code>ing</code>、<code>tion</code> 在英文单词中特别常见。在上一个例子中，<code>e</code>、<code>d</code> 分别存放在了每一个分支上。</p> <p>有没有一种方法可以更加节省存储空间呢？有的，那就是 DFA。</p> <center><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303158478-66a96e2d-6424-43d6-8cb3-2f7a39f960b8.gif" style="width:50%;"></center> <p>在上面的例子中，单词 <code>need</code>、<code>nested</code>、<code>seed</code> 和 <code>speed</code> 仅由 9 个节点组成，而上一张图中的前缀树包含了 17 个节点。</p> <p>可以看出，最小化前缀树 DFA 可以在很大程度上减少数据结构的大小。即使词汇量很大，最小化 DFA 通常也适合在内存中存储，避免昂贵的磁盘访问是实现快速自动补全的关键。</p> <h3 id="一些扩展"><a href="#一些扩展" class="header-anchor">#</a> 一些扩展</h3> <p>上面介绍了如何利用合理的数据结构实现基本的自动补全功能。这些数据结构可以通过多种方式进行扩展，从而改善用户体验。</p> <p>通常，满足特定前缀的词汇可能很多，而用户界面上能够显示的却不多，我们更希望能显示最常搜索或者最有价值的词汇。这通常可以通过为词汇表中的每个单词增加一个代表单词值的<strong>权重</strong> <code>weight</code>，并且按照权重高低来排序自动补全列表。</p> <ul><li>对于排序后的词汇表来说，在词汇表每个元素上增加 <code>weight</code> 属性并不难；</li> <li>对于前缀树来说，将 <code>weight</code> 存储在叶子节点中，也是很简单的一个实现；</li> <li>对于 <code>DFA</code> 来说，则较为复杂。因为一个叶子节点可以通过多条路径到达。一种解决方案是将权重关联到路径而不是叶子节点。</li></ul> <p>目前有不少开源库都提供了这个功能，比如主流的搜索引擎框架 <a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://lucene.apache.org/solr/" target="_blank" rel="noopener noreferrer">Solr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等，基于此，我们可以实现高效而强大的自动补全功能。</p> <h4 id="推荐阅读"><a href="#推荐阅读" class="header-anchor">#</a> 推荐阅读</h4> <ul><li><a href="https://mp.weixin.qq.com/s/RNKDCK2KoyeuMeEs6GUrow" target="_blank" rel="noopener noreferrer">阿里又一个 20k+ stars 开源项目诞生，恭喜 fastjson！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/rjGqxUvrEqJNlo09GrT1Dw" target="_blank" rel="noopener noreferrer">刷掉 90% 候选人的互联网大厂海量数据面试题（附题解 + 方法总结）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/kalGv5T8AZGxTnLHr2wDsA" target="_blank" rel="noopener noreferrer">好用！期待已久的文本块功能究竟如何在 Java 13 中发挥作用？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/_q812aGD1b9QvZ2WFI0Qgw" target="_blank" rel="noopener noreferrer">2019 GitHub 开源贡献排行榜新鲜出炉！微软谷歌领头，阿里跻身前 12！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr> <p>欢迎关注我的公众号“<strong>Doocs</strong>”，原创技术文章第一时间推送。</p> <center><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303220922-7e14aefa-816e-44c1-8604-ade709ca1c69.png" style="width:100px;"></center></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/yhBlog/" class="prev router-link-active">
          首页菜单
        </a></span> <span class="next"><a href="/yhBlog/handbook/secondPage.html">
          第二章
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#使用自动补全" class="sidebar-link reco-side-使用自动补全" data-v-b57cc07c>使用自动补全</a></li><li class="level-2" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#基于-预测-而非-建议" class="sidebar-link reco-side-基于-预测-而非-建议" data-v-b57cc07c>基于“预测”而非“建议”</a></li><li class="level-2" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#为什么看不到某些联想词" class="sidebar-link reco-side-为什么看不到某些联想词" data-v-b57cc07c>为什么看不到某些联想词？</a></li><li class="level-2" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#为什么会看到某些不当的联想词" class="sidebar-link reco-side-为什么会看到某些不当的联想词" data-v-b57cc07c>为什么会看到某些不当的联想词？</a></li><li class="level-2" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#如何实现自动补全算法" class="sidebar-link reco-side-如何实现自动补全算法" data-v-b57cc07c>如何实现自动补全算法？</a></li><li class="level-3" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#词汇表实现" class="sidebar-link reco-side-词汇表实现" data-v-b57cc07c>词汇表实现</a></li><li class="level-3" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#前缀树实现" class="sidebar-link reco-side-前缀树实现" data-v-b57cc07c>前缀树实现</a></li><li class="level-3" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#有限状态自动机-dfa-实现" class="sidebar-link reco-side-有限状态自动机-dfa-实现" data-v-b57cc07c>有限状态自动机(DFA)实现</a></li><li class="level-3" data-v-b57cc07c><a href="/yhBlog/handbook/firstPage.html#一些扩展" class="sidebar-link reco-side-一些扩展" data-v-b57cc07c>一些扩展</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/yhBlog/assets/js/app.916f3763.js" defer></script><script src="/yhBlog/assets/js/7.0f46c849.js" defer></script><script src="/yhBlog/assets/js/2.443f2001.js" defer></script><script src="/yhBlog/assets/js/1.01d42e65.js" defer></script><script src="/yhBlog/assets/js/39.4cbde676.js" defer></script>
  </body>
</html>
